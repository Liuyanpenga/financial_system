"use strict";(self.webpackChunkfinancial_system=self.webpackChunkfinancial_system||[]).push([[650],{20650:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=a(567);const n={multipleSelection:!0,index:!0},i=[{prop:"birthday",label:"出生日期",width:120,align:"center"},{prop:"name",label:"姓名",width:120,align:"center"},{prop:"sex",label:"性别",width:120,align:"center"},{prop:"education",label:"教育程度",width:120,align:"center"},{prop:"mobile_phone",label:"手机号码",align:"center",width:200},{prop:"address1",label:"居住地址",width:300,align:"center"},{label:"申请状态",prop:"status",align:"center"},{label:"操作",prop:"operation",width:300,align:"center"}],s=[{value:"man",label:"男"},{value:"woman",label:"女"}];var o=a(54011),l=a(28905),u=a(34525),d={name:"input-manager",mixins:[l.Z,u.Z],data(){return{tableConfig:n,columns:i,tableData:[],dialogVisible:!1,formVisible:!1,editForm:{}}},created(){this.load()},methods:{beforeInit(){return this.loadUrl="/loan/list",!0},showEditForm(e){this.editData=e,this.editForm=function(e){return{items:[[{label:"姓名",value:e.name,key:"name",colSpan:22,type:r.lD}],[{label:"性别",value:e.sex,key:"sex",colSpan:22,type:r.XD,options:s}],[{label:"地址",value:e.address1,key:"address1",colSpan:22,type:r.lD}]],rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],sex:[{required:!0,message:"请输入性别",trigger:"blur"}],address1:[{required:!0,message:"请输入居住地址",trigger:"blur"}]}}}(e),this.dialogVisible=!0},async saveEdit(){const e=this.$refs.form.getData();await this.$econfirm("是否确认保存?")&&(await(0,o.Bo)({...this.editData,...e}),this.$message.success("保存成功"),this.load(),this.dialogVisible=!1)},async delEditForm(e){await this.$econfirm("是否确认删除?")&&(await(0,o.q3)(e),this.$message.success("删除成功"),this.load(),this.dialogVisible=!1)},async submitEditForm(e){await this.$econfirm("是否确认提交?")&&(await(0,o.pV)(e),this.$message.success("提交成功"),this.load(),this.dialogVisible=!1)}}},c=(0,a(1001).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("ESearch",{attrs:{placeholder:"请输入姓名查找"},on:{setValue:e.setQuery}}),t("ETable",{attrs:{border:"",usePage:"",pager:e.frontPager,data:e.tableData,columns:e.columns,config:e.tableConfig},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange},scopedSlots:e._u([{key:"birthday",fn:function({row:a}){return[t("span",[e._v(e._s(e._f("date")(a.birthday)))])]}},{key:"sex",fn:function({row:a}){return[t("span",[e._v(e._s(e._f("sex")(a.sex)))])]}},{key:"education",fn:function({row:a}){return[t("span",[e._v(e._s(e._f("education")(a.education)))])]}},{key:"status",fn:function({row:a}){return[t("el-tag",{attrs:{type:e._f("statusColor")(a.status)}},[e._v(e._s(e._f("status")(a.status)))])]}},{key:"operation",fn:function({row:a}){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showEditForm(a)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.delEditForm(a.id)}}},[e._v("删除")]),t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitEditForm(a.id)}}},[e._v("提交审核")])]}}])}),t("el-dialog",{attrs:{title:"申请管理-编辑",visible:e.dialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogVisible=t},open:function(t){e.formVisible=!0},closed:function(t){e.formVisible=!1}}},[e.formVisible?t("EForm",{ref:"form",attrs:{config:e.editForm}},[t("span",{attrs:{slot:"btn"},slot:"btn"})]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"001713aa",null).exports},54011:function(e,t,a){a.d(t,{AK:function(){return l},Bo:function(){return i},Pv:function(){return f},QA:function(){return n},SD:function(){return d},YB:function(){return h},ey:function(){return u},i0:function(){return p},pV:function(){return o},q3:function(){return s},rX:function(){return c},tn:function(){return g}});var r=a(2032);const n=e=>r.Z.post("/loan/create",e,{fullLoading:!0}),i=e=>r.Z.put("/loan/update",e),s=e=>r.Z.delete("/loan/delete/"+e),o=e=>r.Z.post("/loan/submitToApprove/",{id:e}),l=(e,t)=>r.Z.post("/approve/first/pass",{appId:e,loanId:t}),u=e=>r.Z.post("/approve/first/reject",{appId:e}),d=e=>r.Z.get("/loan/query?id="+e),c=e=>r.Z.post("/approve/end/pass",{appId:e}),p=e=>r.Z.post("/approve/end/reject",{appId:e}),g=e=>r.Z.post("/contract/createFile",{id:e}),h=e=>r.Z.get(`/contract/download?id=${e}`),f=e=>(0,r.Z)({url:e,responseType:"blob"})},34525:function(e,t,a){var r=a(2032);t.Z={data(){return{showLoading:!1}},methods:{beforeInit(){return!1},async load(){if(!this.beforeInit())return;this.showLoading=!0;let e=await(0,r.Z)(this.loadUrl,{params:this.apiPager});this.showLoading=!1,this.tableData=e.data.data,this.setTotal(e.data.pager.rows)}}}},28905:function(e,t,a){var r=a(42325);t.Z={data(){return{pager:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,layout:"total, sizes, prev, pager, next, jumper",total:100,query:""}}},methods:{handleSizeChange(e){this.pager.pageSize=e,this.pager.currentPage=1,this.load()},handleCurrentChange(e){this.pager.currentPage=e,this.load()},setTotal(e){this.pager.total=e},setQuery(e){this.pager.query=e,this.pager.currentPage=1,this.load()}},computed:{frontPager(){return(0,r.I8)(this.$data.pager)},apiPager(){let e={pageNo:this.pager.currentPage,pageSize:this.pager.pageSize};return this.pager.query&&""!==this.pager.query.trim()&&(e.name=this.pager.query),e}}}}}]);