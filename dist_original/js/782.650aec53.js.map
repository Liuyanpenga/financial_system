{"version":3,"file":"js/782.650aec53.js","mappings":"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","sources":["webpack://financial_system/./src/views/contract/index.vue","webpack://financial_system/./src/views/contract/configData.js","webpack://financial_system/src/views/contract/index.vue","webpack://financial_system/./src/views/contract/index.vue?0efb","webpack://financial_system/./src/views/contract/index.vue?b3dd","webpack://financial_system/./src/api/loan.js","webpack://financial_system/./src/mixins/crud.js","webpack://financial_system/./src/mixins/pager.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('ESearch',{attrs:{\"placeholder\":\"请输入姓名\"},on:{\"setValue\":_vm.setQuery}}),_c('ETable',{attrs:{\"usePage\":\"\",\"pager\":_vm.frontPager,\"data\":_vm.tableData,\"border\":\"\",\"columns\":_vm.columns,\"config\":_vm.tableConfig},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange},scopedSlots:_vm._u([{key:\"status\",fn:function({ row }){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusColor\")(row.status)}},[_vm._v(_vm._s(_vm._f(\"status\")(row.status)))])]}},{key:\"operation\",fn:function({ row }){return [_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":row.status !== 5},on:{\"click\":function($event){return _vm.createFile(row.id)}}},[_vm._v(\"生成合同\")]),_c('el-button',{attrs:{\"type\":\"success\",\"disabled\":row.status !== 7},on:{\"click\":function($event){return _vm.downloadFile(row.id)}}},[_vm._v(\"下载合同\")])]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\nexport const tableConfig = Object.freeze({});\r\nexport const columns = Object.freeze([\r\n   \r\n    {\r\n        prop: 'name',\r\n        label: '姓名',\r\n        width: 120,\r\n    },\r\n    {\r\n        label: '身份证',\r\n        prop: 'identity_card',\r\n\r\n    },\r\n    {\r\n        prop: 'status',\r\n        label: '合同状态',\r\n        width: 120,\r\n    },\r\n    {\r\n        label: '操作',\r\n        prop: 'operation',\r\n        width: 300,\r\n    },\r\n].map(ele => ({ ...ele, align: 'center' })));","<template>\r\n  <div>\r\n    <ESearch placeholder=\"请输入姓名\" @setValue=\"setQuery\" />\r\n\r\n    <ETable\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      usePage\r\n      :pager=\"frontPager\"\r\n      :data=\"tableData\"\r\n      border\r\n      :columns=\"columns\"\r\n      :config=\"tableConfig\"\r\n    >\r\n      <template #status=\"{ row }\">\r\n        <el-tag :type=\"row.status | statusColor\">{{ row.status | status }}</el-tag>\r\n      </template>\r\n      <template #operation=\"{ row }\">\r\n        <el-button type=\"primary\" :disabled=\"row.status !== 5\" @click=\"createFile(row.id)\">生成合同</el-button>\r\n        <el-button type=\"success\" :disabled=\"row.status !== 7\" @click=\"downloadFile(row.id)\">下载合同</el-button>\r\n      </template>\r\n    </ETable>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport crud from \"@/mixins/crud\";\r\nimport pager from \"@/mixins/pager\";\r\nimport { allDownloadFile } from '@/utils/index'\r\nimport { columns, tableConfig } from \"./configData\";\r\nimport { createContractFile, downloadContractFile, createBlob } from '@/api/loan'\r\nexport default {\r\n  name:'contract',\r\n  mixins: [pager, crud],\r\n  data() {\r\n    return {\r\n      columns,\r\n      tableConfig,\r\n      tableData: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.load();\r\n  },\r\n  methods: {\r\n    beforeInit() {\r\n      this.loadUrl = \"/contract/list\";\r\n      return true;\r\n    },\r\n    async createFile(id){\r\n      await createContractFile(id)\r\n      this.$message.success(\"生成合同成功\");\r\n      this.load()\r\n    },\r\n    async downloadFile(id){\r\n      let res =  await downloadContractFile(id)\r\n      if(!res?.data?.data?.url) throw new Error(\"无法获取Url\");\r\n      const downloadUrl = res?.data?.data?.url.replace('/api','')\r\n      let resBlob = await createBlob(downloadUrl)\r\n      allDownloadFile(resBlob.data,`贷款合同.docx`)\r\n      this.$message.success(\"下载合同成功\");\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=10476d2a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import req from '@/utils/request'\r\n\r\n// 提交申请 \r\nexport const createLoanApi = (loanData) => req.post('/loan/create', loanData, { fullLoading: true })\r\n// 申请列表\r\nexport const getLoanList = (pager) => req.get('/loan/list', { params: pager })\r\n// 申请编辑更新\r\nexport const editLoanUpdate = (loanData) => req.put('/loan/update', loanData)\r\n// 申请删除\r\nexport const deleteLoanForm = (id) => req.delete('/loan/delete/' + id)\r\n// 提交审核\r\nexport const submitLoanForm = (id) => req.post('/loan/submitToApprove/', { id })\r\n// 初审通过\r\nexport const passLoan = (appId, loanId) => req.post('/approve/first/pass', { appId, loanId })\r\n// 初审拒绝\r\nexport const rejectLoan = (appId) => req.post('/approve/first/reject', { appId })\r\n// 终审查看\r\nexport const getEndLoanInfo = id => req.get('/loan/query?id=' + id);\r\n// 终审通过\r\nexport const passEndLoan = (appId) => req.post('/approve/end/pass', { appId });\r\n// 终审拒绝\r\nexport const rejectEndLoan = (appId) => req.post('/approve/end/reject', { appId });\r\n// 生成合同\r\nexport const createContractFile = (id) => req.post('/contract/createFile', { id });\r\n// 下载合同\r\nexport const downloadContractFile = (id) => req.get(`/contract/download?id=${id}`);\r\n// 生成浏览器专属 blob\r\nexport const createBlob = (url) => req({\r\n  url:url,\r\n  responseType:'blob'\r\n})\r\n","import req from \"@/utils/request\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      showLoading:false\r\n    }\r\n  },\r\n  methods: {\r\n    // 请求开关\r\n    beforeInit(){\r\n      return false\r\n    },\r\n    async load() {\r\n      if(!this.beforeInit()) return;\r\n      // 请求数据\r\n      this.showLoading = true\r\n      let res = await req(this.loadUrl, {\r\n        params: this.apiPager\r\n      });\r\n      this.showLoading = false\r\n      // 放数据\r\n      this.tableData = res.data.data;\r\n      // 数据总数 \r\n      this.setTotal(res.data.pager.rows)\r\n    }\r\n  },\r\n}","import { deepClone } from \"@/utils\"\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      pager: {\r\n        currentPage: 1,\r\n        pageSizes: [10, 20, 30, 40],\r\n        pageSize: 10,\r\n        layout: \"total, sizes, prev, pager, next, jumper\",\r\n        total: 100,\r\n        query: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pager.pageSize = val\r\n      this.pager.currentPage = 1\r\n      this.load()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pager.currentPage = val\r\n      this.load()\r\n    },\r\n    setTotal(total) {\r\n      this.pager.total = total\r\n    },\r\n    setQuery(query) {\r\n      this.pager.query = query\r\n      this.pager.currentPage = 1\r\n      this.load()\r\n    }\r\n  },\r\n  computed: {\r\n    // 前端数据\r\n    frontPager() {\r\n      return deepClone(this.$data.pager)\r\n    },\r\n    // 后端参数\r\n    apiPager() {\r\n      let params = {\r\n        pageNo: this.pager.currentPage,\r\n        pageSize: this.pager.pageSize,\r\n      }\r\n      // 附加查询参数 name\r\n      if (this.pager.query && this.pager.query.trim() !== '') {\r\n        params.name = this.pager.query\r\n      }\r\n      return params\r\n    }\r\n  },\r\n}"],"names":["render","_vm","this","_c","_self","attrs","on","setQuery","frontPager","tableData","columns","tableConfig","handleSizeChange","handleCurrentChange","scopedSlots","_u","key","fn","row","_f","status","_v","_s","$event","createFile","id","downloadFile","staticRenderFns","Object","freeze","prop","label","width","map","ele","align","name","mixins","pager","crud","data","created","load","methods","beforeInit","loadUrl","createContractFile","$message","success","res","downloadContractFile","url","Error","downloadUrl","replace","resBlob","createBlob","allDownloadFile","component","createLoanApi","loanData","req","fullLoading","editLoanUpdate","deleteLoanForm","submitLoanForm","passLoan","appId","loanId","rejectLoan","getEndLoanInfo","passEndLoan","rejectEndLoan","responseType","showLoading","async","params","apiPager","setTotal","rows","currentPage","pageSizes","pageSize","layout","total","query","val","computed","deepClone","$data","pageNo","trim"],"sourceRoot":""}